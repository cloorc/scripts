cnf=/usr/lib/ssl/openssl.cnf; [ ! -e "${cnf}" ] && mkdir -p ${cnf%/*} && curl -sS http://web.mit.edu/crypto/openssl.cnf>>${cnf};read -erst 0 ignore;id=;read -p "please specify the identity for new key pair: [default]" id; [ -z "${id}" ] && id=default;openssl genrsa -out ${id}-priv-key.pem 2048;openssl req -subj "/CN=${id}" -new -key ${id}-priv-key.pem -out ${id}.csr;openssl x509 -req -days 1825 -in ${id}.csr -CA ca.pem -CAkey ca-priv-key.pem -CAcreateserial -out ${id}-cert.pem -extensions v3_req -extfile ${cnf}
